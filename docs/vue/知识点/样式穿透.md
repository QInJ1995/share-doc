# 样式穿透

在 Vue 项目中，样式穿透是一个重要的功能，允许开发者从父组件修改子组件的内部样式。Vue 2 和 Vue 3 对样式穿透的支持有所不同，以下是详细的使用手册。

## 样式穿透的背景

在 Vue 的单文件组件中，`scoped` 属性会为组件的样式添加作用域，防止样式污染全局。但在某些场景下（如定制第三方组件样式），需要突破这种作用域限制，这时可以使用样式穿透。

## Vue 2 样式穿透

### 支持的深度选择器

1. `>>>`：原始深度选择器，但兼容性较差，不推荐使用。
2. `/deep/`：推荐使用，支持大多数 CSS 预处理器。
3. `::v-deep`：Vue 2 中的别名深度选择器。

### 示例

```vue
<style scoped>
/* 使用 /deep/ */
.parent /deep/ .child {
  color: red;
}

/* 使用 ::v-deep */
.parent ::v-deep(.child) {
  color: red;
}
</style>
```

### 注意事项

- `>>>` 和 `/deep/` 在某些 CSS 预处理器中可能会有解析问题。
- `::v-deep` 是 Vue 2 中的推荐选择器。

## Vue 3 样式穿透

### 推荐的深度选择器

1. `:deep()`：Vue 3 官方推荐的深度选择器。
2. `::v-deep`：仍然支持，但已被标记为弃用。

### 示例

```vue
<style scoped>
/* 推荐使用 :deep() */
.parent :deep(.child) {
  color: red;
}

/* 不推荐使用 ::v-deep */
.parent ::v-deep(.child) {
  color: red;
}
</style>
```

### 注意事项

- `>>>` 和 `/deep/` 在 Vue 3 中已被移除，使用会导致编译警告。
- `:deep()` 是 Vue 3 中的最佳实践，语法更符合 CSS 规范。

## 样式穿透的最佳实践

### 定制第三方组件样式

在定制第三方组件样式时，可以使用深度选择器穿透组件的样式封装。

```vue
<template>
  <ThirdPartyComponent class="custom-class" />
</template>

<style scoped>
/* 使用深度选择器定制样式 */
:deep(.custom-class .child-element) {
  color: blue;
}
</style>
```

### 避免滥用样式穿透

样式穿透可能导致样式冲突或难以维护，建议仅在必要时使用。

## 深度选择器的演变过程

1. **`>>>`**：最初的深度选择器，但兼容性较差。
2. **`/deep/`**：曾是 CSS 提议的一部分，但已被废弃。
3. **`::v-deep`**：Vue 2 中的推荐选择器，但在 Vue 3 中被标记为弃用。
4. **`:deep()`**：Vue 3 官方推荐的深度选择器，符合现代 CSS 规范。

## 总结

1. 在 Vue 2 中，推荐使用 `/deep/` 或 `::v-deep`。
2. 在 Vue 3 中，推荐使用 `:deep()`，避免使用已弃用的选择器。
3. 样式穿透主要用于定制第三方组件样式，避免滥用。

通过合理使用样式穿透，可以在保持组件封装性的同时，实现灵活的样式定制。
